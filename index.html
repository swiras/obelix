
<!-- saved from url=(0029)https://essatereza.github.io/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="manifest" href="data:application/manifest+json;base64,eyJuYW1lIjoiIiwic2hvcnRfbmFtZSI6IiIsInRoZW1lX2NvbG9yIjoiI2Y1ZjZmYiIsImJhY2tncm91bmRfY29sb3IiOiIjZjVmNmZiIiwiZGlzcGxheSI6InN0YW5kYWxvbmUifQ==">
    
    <link rel="stylesheet" href="assets/index.css">
    <link rel="icon" type="image/x-icon" href="assets/images/icon.png">
    <link rel="apple-touch-icon" href="assets/images/icon.png">
    <title>mObywatel</title>
    <meta name="viewport" content="width=device-width, initial-scale=0.8, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body>
    <img src="./assets/images/unnamed.png" class="logo">
    <p class="logo_text">mocarz</p>

    <p class="warning">Pamiętaj ta strona służy do generowania dowodów w celach edukacyjnych lub do wykorzystania w produkcjach filmowych, używanie wygenerowanego dowodu jako oryginału wystawionego przez państwo jest nielegalne.</p>

    <div class="guide_holder">
        <div class="top_holder">
            <p class="guide_title">Instrukcja</p>
            <img class="arrow" src="./assets/images/aUZmu0W.png">
        </div>
        <div class="guide_text">
            <span style="font-size: 17px; font-weight: 500;">Dla systemu IOS:</span><br>
            <ul>
                <li>Upewnij się, że używasz przeglądarki Safari</li>
                <li>Uzupełnij dane i kliknij wejdź</li>
                <li>Naciśji udostępnij -&gt; Do Ekranu głównego</li>
            </ul>
            <span style="font-size: 17px; font-weight: 500;">Dla systemu Android:</span>
            <ul>
                <li>Upewnij się, że używasz przeglądarki google lub chrome</li>
                <li>Uzupełnij dane i kliknij wejdź</li>
                <li>Naciśji 3 kropki -&gt; Dodaj do ekranu głównego</li>
            </ul>
        </div>
    </div>
 
    <div class="upload">
        <p class="error">To pole jest wymagane</p>
        <img class="upload_uploaded" id="userPhoto" style="display: none;">
        <input type="file" id="photoInput" accept="image/*" style="display: none;">
        <div class="upload_uploading"></div>
        <div class="upload_grid" onclick="document.getElementById('photoInput').click()">
            <img class="upload_image" src="./assets/images/vwIQErh.png">
            <p class="upload_text">Dodaj zdjęcie</p>
        </div>
    </div>

    <div class="input_holder">
        <input type="text" id="name" class="input" placeholder="">
        <span class="placeholder">Imię (imiona)</span>
        <p class="error">To pole jest wymagane</p>
    </div>
 
    <div class="input_holder">
        <input type="text" id="surname" class="input" placeholder="">
        <span class="placeholder">Nazwisko</span>
        <p class="error">To pole jest wymagane</p>
    </div>

    <p class="top_info">Płeć</p>
    <div class="selector_box">
        <div class="selected_grid">
            <p class="selector_text selected_text">Mężczyzna</p>
            <img class="selected_arrow" src="./assets/images/RXsdBB6.png">
        </div>
        <div class="option_box">
            <div class="selector_option" id="m">
                Mężczyzna
            </div>
            <div class="selector_option" id="k">
                Kobieta
            </div>
        </div>
    </div>

    <div class="date">
        <p class="top_info">Data urodzenia</p>
        <div class="date_grid">
            <input class="date_input" placeholder="DD" type="number">
    
            
            <input class="date_input" placeholder="MM" type="number">
    
            
            <input class="date_input" placeholder="YYYY" type="number">
    
            
        </div>
        <p class="error">Wprowadź prawidłową datę</p>
    </div>

    <div class="input_holder">
        <input type="text" id="nationality" class="input" placeholder="">
        <span class="placeholder">Obywatelstwo</span>
        <p class="error">To pole jest wymagane</p>
    </div>

    <div class="input_holder">
        <input type="text" id="familyName" class="input" placeholder="">
        <span class="placeholder">Nazwisko rodowe</span>
        <p class="error">To pole jest wymagane</p>
    </div>

    <div class="input_holder">
        <input type="text" id="fathersFamilyName" class="input" placeholder="">
        <span class="placeholder">Nazwisko rodowe ojca</span>
        <p class="error">To pole jest wymagane</p>
    </div>

    <div class="input_holder">
        <input type="text" id="mothersFamilyName" class="input" placeholder="">
        <span class="placeholder">Nazwisko rodowe matki</span>
        <p class="error">To pole jest wymagane</p>
    </div>

    <p class="subtext">Miejsce zamieszkania</p>

    <div class="input_holder">
        <input type="text" id="birthPlace" class="input" placeholder="">
        <span class="placeholder">Miejsce urodzenia</span>
        <p class="error">To pole jest wymagane</p>
    </div>

    <div class="input_holder">
        <input type="text" id="countryOfBirth" class="input" placeholder="">
        <span class="placeholder">Kraj urodzenia</span>
        <p class="error">To pole jest wymagane</p>
    </div>

    <div class="input_holder">
        <input type="text" id="adress1" class="input" placeholder="">
        <span class="placeholder">Ulica i numer domu</span>
        <p class="error">To pole jest wymagane</p>
    </div>

    <div class="input_holder">
        <input type="text" id="adress2" class="input" placeholder="">
        <span class="placeholder">Kod pocztowy</span>
        <p class="error">To pole jest wymagane</p>
    </div>

    <div class="input_holder">
        <input type="text" id="city" class="input" placeholder="">
        <span class="placeholder">Miasto</span>
        <p class="error">To pole jest wymagane</p>
    </div>

    <a class="go" href="#" style="text-decoration: none; color: inherit;">wejdź</a>
    
    <script src="./assets/index.js.pobrane"></script>
    <script src="./assets/manifest.js.pobrane"></script>
    <script>
    // Funkcja generująca PESEL
    function generatePESEL(birthday, sex) {
        // Data w formacie DD.MM.YYYY
        const [day, month, year] = birthday.split('.').map(Number);
        
        // Obliczanie ostatnich 2 cyfr roku i miesiąca
        let shortYear = year % 100;
        let monthWithCentury = month;
        if (year >= 1800 && year < 1900) monthWithCentury += 80;
        if (year >= 2000 && year < 2100) monthWithCentury += 20;
        if (year >= 2100 && year < 2200) monthWithCentury += 40;
        if (year >= 2200 && year < 2300) monthWithCentury += 60;
        
        // Losowe liczby i płeć
        const randomNumbers = Math.floor(100 + Math.random() * 900);
        const genderDigit = sex === 'Kobieta' ? 
            (Math.floor(Math.random() * 5) * 2) : 
            (Math.floor(Math.random() * 5) * 2 + 1);
        
        // Część bez sumy kontrolnej
        const partialPesel = 
            `${shortYear.toString().padStart(2, '0')}` +
            `${monthWithCentury.toString().padStart(2, '0')}` +
            `${day.toString().padStart(2, '0')}` +
            `${randomNumbers}` +
            `${genderDigit}`;
        
        // Obliczanie sumy kontrolnej
        const weights = [1, 3, 7, 9, 1, 3, 7, 9, 1, 3];
        let sum = 0;
        for (let i = 0; i < 10; i++) {
            sum += parseInt(partialPesel[i]) * weights[i];
        }
        const checksum = (10 - (sum % 10)) % 10;
        
        return partialPesel + checksum;
    }
    // Przywróć dane formularza
    function restoreFormData() {
        const savedData = localStorage.getItem('formData');
        if (savedData) {
            const formData = JSON.parse(savedData);
            
            // Przywróć podstawowe pola
            document.getElementById('name').value = formData.name || '';
            document.getElementById('surname').value = formData.surname || '';
            document.getElementById('nationality').value = formData.nationality || '';
            document.getElementById('familyName').value = formData.familyName || '';
            document.getElementById('fathersFamilyName').value = formData.fathersFamilyName || '';
            document.getElementById('mothersFamilyName').value = formData.mothersFamilyName || '';
            document.getElementById('birthPlace').value = formData.birthPlace || '';
            document.getElementById('countryOfBirth').value = formData.countryOfBirth || '';
            document.getElementById('adress1').value = formData.adress?.split('\n')[0] || '';
            const adressParts = formData.adress?.split('\n')[1]?.split(' ') || [];
            document.getElementById('adress2').value = adressParts[0] || '';
            document.getElementById('city').value = adressParts.slice(1).join(' ') || '';
            
            // Przywróć datę urodzenia
            if (formData.birthday) {
                const [day, month, year] = formData.birthday.split('.');
                document.querySelector('.date_input[placeholder="DD"]').value = day;
                document.querySelector('.date_input[placeholder="MM"]').value = month;
                document.querySelector('.date_input[placeholder="YYYY"]').value = year;
            }
            
            // Przywróć płeć
            if (formData.sex) {
                const sexOptions = document.querySelectorAll('.selector_option');
                sexOptions.forEach(option => {
                    if (option.textContent === formData.sex) {
                        option.click();
                    }
                });
            }
            
            // Przywróć zdjęcie
            if (formData.photo) {
                const img = document.getElementById('userPhoto');
                img.src = formData.photo;
                img.style.display = 'block';
            }
        }
    }

    // Przywróć dane przy ładowaniu
    restoreFormData();
    
    // Obsługa wyboru zdjęcia
    document.getElementById('photoInput').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
                const img = document.getElementById('userPhoto');
                img.src = event.target.result;
                img.style.display = 'block';
                localStorage.setItem('userPhoto', event.target.result);
            };
            reader.readAsDataURL(file);
        }
    });

    document.querySelector('.go').addEventListener('click', function(e) {
            e.preventDefault();
            
            // Pobierz wszystkie dane z formularza
            const name = document.getElementById('name').value;
            const surname = document.getElementById('surname').value;
            const sex = document.querySelector('.selector_text.selected_text').textContent;
            const birthday = `${document.querySelector('.date_input[placeholder="DD"]').value}.${document.querySelector('.date_input[placeholder="MM"]').value}.${document.querySelector('.date_input[placeholder="YYYY"]').value}`;
            const nationality = document.getElementById('nationality').value;
            const familyName = document.getElementById('familyName').value;
            const fathersFamilyName = document.getElementById('fathersFamilyName').value;
            const mothersFamilyName = document.getElementById('mothersFamilyName').value;
            const birthPlace = document.getElementById('birthPlace').value;
            const countryOfBirth = document.getElementById('countryOfBirth').value;
            const adress = `${document.getElementById('adress1').value}\n${document.getElementById('adress2').value} ${document.getElementById('city').value}`;
            
            // Zapisz dane
            const photoData = document.getElementById('userPhoto').src || localStorage.getItem('userPhoto');
            const pesel = generatePESEL(birthday, sex);
            const formData = {
                name, surname, sex, birthday, nationality, familyName,
                fathersFamilyName, mothersFamilyName, birthPlace,
                countryOfBirth, adress, pesel,
                photo: photoData
            };
            localStorage.setItem('userPESEL', pesel);
            localStorage.setItem('formData', JSON.stringify(formData));
            
            // Przekieruj z aktualnym zdjęciem
            const photoToSend = document.getElementById('userPhoto').src || localStorage.getItem('userPhoto');
            if (photoToSend) {
                localStorage.setItem('userPhoto', photoToSend);
                window.location.href = `card.html?name=${encodeURIComponent(name)}&surname=${encodeURIComponent(surname)}&sex=${encodeURIComponent(sex)}&birthday=${encodeURIComponent(birthday)}&nationality=${encodeURIComponent(nationality)}&familyName=${encodeURIComponent(familyName)}&fathersFamilyName=${encodeURIComponent(fathersFamilyName)}&mothersFamilyName=${encodeURIComponent(mothersFamilyName)}&birthPlace=${encodeURIComponent(birthPlace)}&countryOfBirth=${encodeURIComponent(countryOfBirth)}&adress=${encodeURIComponent(adress)}&pesel=${encodeURIComponent(pesel)}&photo=${encodeURIComponent(photoToSend)}`;
            } else {
                alert('Proszę dodać zdjęcie przed kontynuacją');
            }
        });
        </script>   
</body></html>	
